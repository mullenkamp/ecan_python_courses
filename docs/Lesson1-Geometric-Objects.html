

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-88382509-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Geometric Objects - Spatial Data Model &mdash; GeoPython - AutoGIS 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="GeoPython - AutoGIS 1 documentation" href="index.html"/>
        <link rel="next" title="Exercise 1" href="Exercise-1.html"/>
        <link rel="prev" title="Introduction to Python GIS" href="Lesson1-Intro-Python-GIS.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> GeoPython - AutoGIS
          

          
            
            <img src="_static/logo_hy_geo_135.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2016 Autumn
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Course information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="course-info.html">General info</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installing_Anacondas_GIS.html">Installing Python + GIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="License-terms.html">License and terms of usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 1</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Lesson1-Intro-Python-GIS.html">Introduction to Python GIS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Geometric Objects - Spatial Data Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-geometric-objects-and-shapely-module">Overview of geometric objects and Shapely -module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#point">Point</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#point-attributes-and-functions">Point attributes and functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#linestring">LineString</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linestring-attributes-and-functions">LineString attributes and functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#polygon">Polygon</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#polygon-attributes-and-functions">Polygon attributes and functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pro-tips-optional">Pro -tips (optional)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#geometry-collections">Geometry collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geometry-collection-objects-attributes-and-functions">Geometry collection -objects&#8217; attributes and functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Exercise-1.html">Exercise 1</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Lesson2-overview.html">Lesson 2 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson2-download-data.html">Download datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson2-overview-pandas-geopandas.html">Pandas and Geopandas -modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson2-pandas-intro.html">Introduction to Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson2-geopandas-basics.html">Introduction to Geopandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="Exercise-2.html">Exercise 2</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Lesson3-overview.html">Lesson 3 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson3-geocoding.html">Geocoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson3-table-join.html">Table join</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson3-projections.html">Re-projecting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson3-point-in-polygon.html">Point in Polygon &amp; Intersect</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson3-spatial-join.html">Spatial join</a></li>
<li class="toctree-l1"><a class="reference internal" href="Exercise-3.html">Exercise 3</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 4</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Lesson4-overview.html">Lesson 4 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson4-download-data.html">Download datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson4-geometric-operations.html">Geometric operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson4-reclassify.html">Data reclassification</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson4-nearest-neighbour.html">Nearest Neighbour Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Exercise-4.html">Exercise 4</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 5</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Lesson5-overview.html">Lesson 5 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson5-download-data.html">Download datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson5-static-maps.html">Static maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson5-interactive-map-bokeh.html">Interactive maps with Bokeh</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson5-share-on-github.html">Sharing interactive plots on GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson5-interactive-map-folium.html">Interactive maps on Leaflet</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson5-World-3D.html">Inspiration: World 3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="Exercise-5.html">Exercise 5</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 6</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Lesson6-overview.html">Lesson 6 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson6-arcpy.html">Python in ArcGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson6-toolbox.html">ArcGIS Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson6-arcpy-script.html">Writing arcpy scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson6-run-the-tool.html">Running the Python script from ArcGIS</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 7</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Lesson7-overview.html">Lesson 7 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson7-download.html">Download data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson7-read-raster.html">Reading raster files with GDAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson7-read-raster-array.html">Reading raster as a numerical array</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lesson7-gdal-utilities.html">GDAL command line tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Exercise-7.html">Exercise 7</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 8</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Lesson8-network-analysis.html">Network analysis in Python</a></li>
</ul>
<p class="caption"><span class="caption-text">Final Assignment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Final-assignment.html">Final assignment</a></li>
</ul>
<p class="caption"><span class="caption-text">Map Challenge 2016</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="map-challenge.html">Map Challenge 2016</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">GeoPython - AutoGIS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Geometric Objects - Spatial Data Model</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/Automating-GIS-processes/2016/blob/master/source/Lesson1-Geometric-Objects.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geometric-objects-spatial-data-model">
<h1>Geometric Objects - Spatial Data Model<a class="headerlink" href="#geometric-objects-spatial-data-model" title="Permalink to this headline">¶</a></h1>
<p><strong>Sources:</strong></p>
<p>These materials are partly based on <a class="reference external" href="http://toblerity.org/shapely/manual.html">Shapely
-documentation</a> and <a class="reference external" href="https://www.packtpub.com/application-development/python-geospatial-development-second-edition">Westra
E. (2013), Chapter
3</a>.</p>
<div class="section" id="overview-of-geometric-objects-and-shapely-module">
<h2>Overview of geometric objects and Shapely -module<a class="headerlink" href="#overview-of-geometric-objects-and-shapely-module" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<img alt="http://www.helsinki.fi/science/accessibility/maintenance/Kuvia/SpatialDataModel.PNG" src="http://www.helsinki.fi/science/accessibility/maintenance/Kuvia/SpatialDataModel.PNG" />
</div>
<p><em>Fundamental geometric objects that can be used in Python with</em>
<a class="reference external" href="http://toblerity.org/shapely/manual.html">Shapely</a> <em>module</em></p>
<p>The most fundamental geometric objects are <strong>Points</strong>, <strong>Lines</strong> and
<strong>Polygons</strong> which are the basic ingredients when working with spatial
data in vector format. Python has a specific module called
<a class="reference external" href="http://toblerity.org/shapely/manual.html#">Shapely</a> that can be
used to create and work with <em>Geometric Objects</em>. There are many useful
functionalities that you can do with Shapely such as:</p>
<ul class="simple">
<li>Create a <strong>Line</strong> or <strong>Polygon</strong> from a <em>Collection</em> of
<strong>Point</strong> geometries</li>
<li>Calculate areas/length/bounds etc. of input geometries</li>
<li>Make geometric operations based on the input geometries such as
<strong>Union</strong>, <strong>Difference</strong>, <strong>Distance</strong> etc.</li>
<li>Make spatial queries between geometries such <strong>Intersects</strong>,
<strong>Touches</strong>, <strong>Crosses</strong>, <strong>Within</strong> etc.</li>
</ul>
<p><strong>Geometric Objects consist of coordinate tuples where:</strong></p>
<ul class="simple">
<li><strong>Point</strong> -object represents a single point in space. Points can be
either two-dimensional (x, y) or three dimensional (x, y, z).</li>
<li><strong>LineString</strong> -object (i.e. a line) represents a sequence of points
joined together to form a line. Hence, a line consist of a list of at
least two coordinate tuples</li>
<li><strong>Polygon</strong> -object represents a filled area that consists of a list
of at least three coordinate tuples that forms the outerior ring and
a (possible) list of hole polygons.</li>
</ul>
<p><strong>It is also possible to have a collection of geometric objects (e.g.
Polygons with multiple parts):</strong></p>
<ul class="simple">
<li><strong>MultiPoint</strong> -object represents a collection of points and consists
of a list of coordinate-tuples</li>
<li><strong>MultiLineString</strong> -object represents a collection of lines and
consists of a list of line-like sequences</li>
<li><strong>MultiPolygon</strong> -object represents a collection of polygons that
consists of a list of polygon-like sequences that construct from
exterior ring and (possible) hole list tuples</li>
</ul>
</div>
<div class="section" id="point">
<h2>Point<a class="headerlink" href="#point" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Creating point is easy, you pass x and y coordinates into Point()
-object (+ possibly also z -coordinate) :</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Import necessary geometric objects from shapely module</span>
<span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">LineString</span><span class="p">,</span> <span class="n">Polygon</span>

<span class="go"># Create Point geometric object(s) with coordinates</span>
<span class="gp">In [2]: </span><span class="n">point1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">4.2</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">point2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">7.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">25.1</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">point3</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">9.26</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.456</span><span class="p">)</span>

<span class="gp">In [5]: </span><span class="n">point3D</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">9.26</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.456</span><span class="p">,</span> <span class="mf">0.57</span><span class="p">)</span>

<span class="go"># What is the type of the point?</span>
<span class="gp">In [6]: </span><span class="n">point_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">point1</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Let&#8217;s see what the variables look like</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="k">print</span><span class="p">(</span><span class="n">point1</span><span class="p">)</span>
<span class="go">POINT (2.2 4.2)</span>

<span class="gp">In [8]: </span><span class="k">print</span><span class="p">(</span><span class="n">point3D</span><span class="p">)</span>
<span class="go">                POINT Z (9.26 -2.456 0.57)</span>

<span class="gp">In [9]: </span><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">point1</span><span class="p">))</span>
<span class="go">                                           &lt;class &#39;shapely.geometry.point.Point&#39;&gt;</span>
</pre></div>
</div>
<p>We can see that the type of the point is shapely&#8217;s Point which is
represented in a specific format that is based on
<a class="reference external" href="https://trac.osgeo.org/geos/">GEOS</a> C++ library that is one of the
standard libraries in GIS. It runs under the hood e.g. in <a class="reference external" href="http://www.qgis.org/en/site/">Quantum
GIS</a>. 3D-point can be recognized from
the capital Z -letter in front of the coordinates.</p>
<div class="section" id="point-attributes-and-functions">
<h3>Point attributes and functions<a class="headerlink" href="#point-attributes-and-functions" title="Permalink to this headline">¶</a></h3>
<p>Point -object has some built-in attributes that can be accessed and also
some useful functionalities. One of the most useful ones are the ability
to extract the coordinates of a Point and calculate the Euclidian
distance between points.</p>
<ul class="simple">
<li>Extracting the coordinates of a Point can be done in a couple of
different ways</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Get the coordinates</span>
<span class="gp">In [10]: </span><span class="n">point_coords</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="n">coords</span>

<span class="go"># What is the type of this?</span>
<span class="gp">In [11]: </span><span class="nb">type</span><span class="p">(</span><span class="n">point_coords</span><span class="p">)</span>
<span class="gh">Out[11]: </span><span class="go">shapely.coords.CoordinateSequence</span>
</pre></div>
</div>
<p>Ok, we can see that the output is a Shapely CoordinateSequence. Let&#8217;s
see how we can get out the actual coordinates:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Get x and y coordinates</span>
<span class="gp">In [12]: </span><span class="n">xy</span> <span class="o">=</span> <span class="n">point_coords</span><span class="o">.</span><span class="n">xy</span>

<span class="go"># Get only x coordinates of Point1</span>
<span class="gp">In [13]: </span><span class="n">x</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="n">x</span>

<span class="go"># Whatabout y coordinate?</span>
<span class="gp">In [14]: </span><span class="n">y</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="n">y</span>
</pre></div>
</div>
<ul class="simple">
<li>What is inside?</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="k">print</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span>
<span class="go">(array(&#39;d&#39;, [2.2]), array(&#39;d&#39;, [4.2]))</span>

<span class="gp">In [16]: </span><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">                                       2.2</span>

<span class="gp">In [17]: </span><span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">                                           4.2</span>
</pre></div>
</div>
<p>Okey, so we can see that the our xy variable contains a tuple where x and y are stored inside of a numpy arrays.
However, our x and y variables are plain decimal numbers.</p>
<ul class="simple">
<li>It is also possible to calculate the distance between points which
can be useful in many applications</li>
<li>the returned distance is based on the projection of the points
(degrees in WGS84, meters in UTM)</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Calculate the distance between point1 and point2</span>
<span class="gp">In [18]: </span><span class="n">point_dist</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">point2</span><span class="p">)</span>

<span class="gp">In [19]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Distance between the points is {0:.2f} decimal degrees&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">point_dist</span><span class="p">))</span>
<span class="go">Distance between the points is 29.72 decimal degrees</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="linestring">
<h2>LineString<a class="headerlink" href="#linestring" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Creating a LineString -object is fairly similar to how Point is
created. Now instead using a single coordinate-tuple we can construct
the line using either a list of shapely Point -objects or pass
coordinate-tuples:</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Create a LineString from our Point objects</span>
<span class="gp">In [20]: </span><span class="n">line</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([</span><span class="n">point1</span><span class="p">,</span> <span class="n">point2</span><span class="p">,</span> <span class="n">point3</span><span class="p">])</span>

<span class="go"># It is also possible to use coordinate tuples having the same outcome</span>
<span class="gp">In [21]: </span><span class="n">line2</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">4.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">7.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">25.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.26</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.456</span><span class="p">)])</span>
</pre></div>
</div>
<ul class="simple">
<li>Let&#8217;s see how our LineString looks like</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [22]: </span><span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="go">LINESTRING (2.2 4.2, 7.2 -25.1, 9.26 -2.456)</span>

<span class="gp">In [23]: </span><span class="k">print</span><span class="p">(</span><span class="n">line2</span><span class="p">)</span>
<span class="go">                                             LINESTRING (2.2 4.2, 7.2 -25.1, 9.26 -2.456)</span>

<span class="gp">In [24]: </span><span class="nb">type</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="go">                                                                                          Out[24]: shapely.geometry.linestring.LineString</span>
</pre></div>
</div>
<p>Ok, now we can see that variable line constitutes of multiple
coordinate-pairs and the type of the data is shapely LineString.</p>
<div class="section" id="linestring-attributes-and-functions">
<h3>LineString attributes and functions<a class="headerlink" href="#linestring-attributes-and-functions" title="Permalink to this headline">¶</a></h3>
<p>LineString -object has many useful built-in attributes and
functionalities. It is for instance possible to extract the coordinates
or the length of a LineString (line), calculate the centroid of the
line, create points along the line at specific distance, calculate the
closest distance from a line to specified Point and simplify the
geometry. See full list of functionalities from <a class="reference external" href="http://toblerity.org/shapely/manual.html#">Shapely
documentation</a>. Here, we
go through a few of them.</p>
<ul class="simple">
<li>We can extract the coordinates of a LineString similarly as with
Point</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Get x and y coordinates of the line</span>
<span class="gp">In [25]: </span><span class="n">lxy</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">xy</span>

<span class="gp">In [26]: </span><span class="k">print</span><span class="p">(</span><span class="n">lxy</span><span class="p">)</span>
<span class="go">(array(&#39;d&#39;, [2.2, 7.2, 9.26]), array(&#39;d&#39;, [4.2, -25.1, -2.456]))</span>
</pre></div>
</div>
<p>Okey, we can see that the coordinates are again stored as a numpy arrays
where first array includes all x-coordinates and the second all the
y-coordinates respectively.</p>
<ul class="simple">
<li>We can extract only x or y coordinates by referring to those arrays
as follows</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Extract x coordinates</span>
<span class="gp">In [27]: </span><span class="n">line_x</span> <span class="o">=</span> <span class="n">lxy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="go"># Extract y coordinates straight from the LineObject by referring to a array at index 1</span>
<span class="gp">In [28]: </span><span class="n">line_y</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="gp">In [29]: </span><span class="k">print</span><span class="p">(</span><span class="n">line_x</span><span class="p">)</span>
<span class="go">array(&#39;d&#39;, [2.2, 7.2, 9.26])</span>

<span class="gp">In [30]: </span><span class="k">print</span><span class="p">(</span><span class="n">line_y</span><span class="p">)</span>
<span class="go">                             array(&#39;d&#39;, [4.2, -25.1, -2.456])</span>
</pre></div>
</div>
<ul class="simple">
<li>We can get specific attributes such as lenght of the line and center
of the line (centroid) straight from the LineString object itself</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Get the lenght of the line</span>
<span class="gp">In [31]: </span><span class="n">l_length</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">length</span>

<span class="go"># Get the centroid of the line</span>
<span class="gp">In [32]: </span><span class="n">l_centroid</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">centroid</span>

<span class="go"># What type is the centroid?</span>
<span class="gp">In [33]: </span><span class="n">centroid_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">l_centroid</span><span class="p">)</span>

<span class="go"># Print the outputs</span>
<span class="gp">In [34]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Length of our line: {0:.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_length</span><span class="p">))</span>
<span class="go">Length of our line: 52.46</span>

<span class="gp">In [35]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Centroid of our line: &quot;</span><span class="p">,</span> <span class="n">l_centroid</span><span class="p">)</span>
<span class="go">                          Centroid of our line:  POINT (6.229961354035622 -11.89241115757239)</span>

<span class="gp">In [36]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Type of the centroid:&quot;</span><span class="p">,</span> <span class="n">centroid_type</span><span class="p">)</span>
<span class="go">                                                                                              Type of the centroid: &lt;class &#39;shapely.geometry.point.Point&#39;&gt;</span>
</pre></div>
</div>
<p>Okey, so these are already fairly useful information for many different
GIS tasks, and we didn&#8217;t even calculate anything yet! These attributes
are built-in in every LineString object that is created. Notice that the
centroid that is returned is Point -object that has its own functions as
was described earlier.</p>
</div>
</div>
<div class="section" id="polygon">
<h2>Polygon<a class="headerlink" href="#polygon" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Creating a Polygon -object continues the same logic of how Point and
LineString were created but Polygon object only accepts
coordinate-tuples as input. Polygon needs at least three
coordinate-tuples:</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Create a Polygon from the coordinates</span>
<span class="gp">In [37]: </span><span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">4.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">7.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">25.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.26</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.456</span><span class="p">)])</span>

<span class="go"># We can also use our previously created Point objects (same outcome)</span>
<span class="go"># --&gt; notice that Polygon object requires x,y coordinates as input</span>
<span class="gp">In [38]: </span><span class="n">poly2</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([[</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="n">point1</span><span class="p">,</span> <span class="n">point2</span><span class="p">,</span> <span class="n">point3</span><span class="p">]])</span>

<span class="go"># Geometry type can be accessed as a String</span>
<span class="gp">In [39]: </span><span class="n">poly_type</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">geom_type</span>

<span class="go"># Using the Python&#39;s type function gives the type in a different format</span>
<span class="gp">In [40]: </span><span class="n">poly_type2</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>

<span class="go"># Let&#39;s see how our Polygon looks like</span>
<span class="gp">In [41]: </span><span class="k">print</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
<span class="go">POLYGON ((2.2 4.2, 7.2 -25.1, 9.26 -2.456, 2.2 4.2))</span>

<span class="gp">In [42]: </span><span class="k">print</span><span class="p">(</span><span class="n">poly2</span><span class="p">)</span>
<span class="go">                                                     POLYGON ((2.2 4.2, 7.2 -25.1, 9.26 -2.456, 2.2 4.2))</span>

<span class="gp">In [43]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Geometry type as text:&quot;</span><span class="p">,</span> <span class="n">poly_type</span><span class="p">)</span>
<span class="go">                                                                                                          Geometry type as text: Polygon</span>

<span class="gp">In [44]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Geometry how Python shows it:&quot;</span><span class="p">,</span> <span class="n">poly_type2</span><span class="p">)</span>
<span class="go">                                                                                                                                         Geometry how Python shows it: &lt;class &#39;shapely.geometry.polygon.Polygon&#39;&gt;</span>
</pre></div>
</div>
<p>Notice that Polygon has double parentheses around the coordinates. This
is because Polygon can also have holes inside of it. As the help of
Polygon -object tells, a Polygon can be constructed using exterior
coordinates and interior coordinates (optional) where the interior
coordinates creates a hole inside the Polygon:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">Help</span> <span class="n">on</span> <span class="n">Polygon</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">polygon</span> <span class="nb">object</span><span class="p">:</span>
<span class="k">class</span> <span class="nc">Polygon</span><span class="p">(</span><span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">BaseGeometry</span><span class="p">)</span>
 <span class="o">|</span>  <span class="n">A</span> <span class="n">two</span><span class="o">-</span><span class="n">dimensional</span> <span class="n">figure</span> <span class="n">bounded</span> <span class="n">by</span> <span class="n">a</span> <span class="n">linear</span> <span class="n">ring</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="n">A</span> <span class="n">polygon</span> <span class="n">has</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span><span class="n">zero</span> <span class="n">area</span><span class="o">.</span> <span class="n">It</span> <span class="n">may</span> <span class="n">have</span> <span class="n">one</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">negative</span><span class="o">-</span><span class="n">space</span>
 <span class="o">|</span>  <span class="s2">&quot;holes&quot;</span> <span class="n">which</span> <span class="n">are</span> <span class="n">also</span> <span class="n">bounded</span> <span class="n">by</span> <span class="n">linear</span> <span class="n">rings</span><span class="o">.</span> <span class="n">If</span> <span class="nb">any</span> <span class="n">rings</span> <span class="n">cross</span> <span class="n">each</span>
 <span class="o">|</span>  <span class="n">other</span><span class="p">,</span> <span class="n">the</span> <span class="n">feature</span> <span class="ow">is</span> <span class="n">invalid</span> <span class="ow">and</span> <span class="n">operations</span> <span class="n">on</span> <span class="n">it</span> <span class="n">may</span> <span class="n">fail</span><span class="o">.</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="n">Attributes</span>
 <span class="o">|</span>  <span class="o">----------</span>
 <span class="o">|</span>  <span class="n">exterior</span> <span class="p">:</span> <span class="n">LinearRing</span>
 <span class="o">|</span>      <span class="n">The</span> <span class="n">ring</span> <span class="n">which</span> <span class="n">bounds</span> <span class="n">the</span> <span class="n">positive</span> <span class="n">space</span> <span class="n">of</span> <span class="n">the</span> <span class="n">polygon</span><span class="o">.</span>
 <span class="o">|</span>  <span class="n">interiors</span> <span class="p">:</span> <span class="n">sequence</span>
 <span class="o">|</span>      <span class="n">A</span> <span class="n">sequence</span> <span class="n">of</span> <span class="n">rings</span> <span class="n">which</span> <span class="n">bound</span> <span class="nb">all</span> <span class="n">existing</span> <span class="n">holes</span><span class="o">.</span>
</pre></div>
</div>
<ul class="simple">
<li>Let&#8217;s create a Polygon with a hole inside</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Let&#39;s create a bounding box of the world and make a whole in it</span>
<span class="go"># First we define our exterior</span>
<span class="gp">In [45]: </span><span class="n">world_exterior</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="mi">90</span><span class="p">)]</span>

<span class="go"># Let&#39;s create a single big hole where we leave ten decimal degrees at the boundaries of the world</span>
<span class="go"># Notice: there could be multiple holes, thus we need to provide a list of holes</span>
<span class="gp">In [46]: </span><span class="n">hole</span> <span class="o">=</span> <span class="p">[[(</span><span class="o">-</span><span class="mi">170</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">170</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="mi">170</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="mi">170</span><span class="p">,</span> <span class="mi">80</span><span class="p">)]]</span>

<span class="go"># World without a hole</span>
<span class="gp">In [47]: </span><span class="n">world</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">shell</span><span class="o">=</span><span class="n">world_exterior</span><span class="p">)</span>

<span class="go"># Now we can construct our Polygon with the hole inside</span>
<span class="gp">In [48]: </span><span class="n">world_has_a_hole</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">shell</span><span class="o">=</span><span class="n">world_exterior</span><span class="p">,</span> <span class="n">holes</span><span class="o">=</span><span class="n">hole</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Let&#8217;s see what we have now:</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [49]: </span><span class="k">print</span><span class="p">(</span><span class="n">world</span><span class="p">)</span>
<span class="go">POLYGON ((-180 90, -180 -90, 180 -90, 180 90, -180 90))</span>

<span class="gp">In [50]: </span><span class="k">print</span><span class="p">(</span><span class="n">world_has_a_hole</span><span class="p">)</span>
<span class="go">                                                        POLYGON ((-180 90, -180 -90, 180 -90, 180 90, -180 90), (-170 80, -170 -80, 170 -80, 170 80, -170 80))</span>

<span class="gp">In [51]: </span><span class="nb">type</span><span class="p">(</span><span class="n">world_has_a_hole</span><span class="p">)</span>
<span class="go">                                                                                                                                                               Out[51]: shapely.geometry.polygon.Polygon</span>
</pre></div>
</div>
<p>Now we can see that the polygon has two different tuples of coordinates.
The first one represents the outerior and the second one represents the
hole inside of the Polygon.</p>
<div class="section" id="polygon-attributes-and-functions">
<h3>Polygon attributes and functions<a class="headerlink" href="#polygon-attributes-and-functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We can again access different attributes that are really useful such
as area, centroid, bounding box, exterior, and exterior-length of the
Polygon</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Get the centroid of the Polygon</span>
<span class="gp">In [52]: </span><span class="n">world_centroid</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">centroid</span>

<span class="go"># Get the area of the Polygon</span>
<span class="gp">In [53]: </span><span class="n">world_area</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">area</span>

<span class="go"># Get the bounds of the Polygon (i.e. bounding box)</span>
<span class="gp">In [54]: </span><span class="n">world_bbox</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">bounds</span>

<span class="go"># Get the exterior of the Polygon</span>
<span class="gp">In [55]: </span><span class="n">world_ext</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">exterior</span>

<span class="go"># Get the length of the exterior</span>
<span class="gp">In [56]: </span><span class="n">world_ext_length</span> <span class="o">=</span> <span class="n">world_ext</span><span class="o">.</span><span class="n">length</span>
</pre></div>
</div>
<ul class="simple">
<li>Let&#8217;s see what we have now</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [57]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Poly centroid: &quot;</span><span class="p">,</span> <span class="n">world_centroid</span><span class="p">)</span>
<span class="go">Poly centroid:  POINT (-0 -0)</span>

<span class="gp">In [58]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Poly Area: &quot;</span><span class="p">,</span> <span class="n">world_area</span><span class="p">)</span>
<span class="go">                              Poly Area:  64800.0</span>

<span class="gp">In [59]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Poly Bounding Box: &quot;</span><span class="p">,</span> <span class="n">world_bbox</span><span class="p">)</span>
<span class="go">                                                  Poly Bounding Box:  (-180.0, -90.0, 180.0, 90.0)</span>

<span class="gp">In [60]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Poly Exterior: &quot;</span><span class="p">,</span> <span class="n">world_ext</span><span class="p">)</span>
<span class="go">                                                                                                   Poly Exterior:  LINEARRING (-180 90, -180 -90, 180 -90, 180 90, -180 90)</span>

<span class="gp">In [61]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Poly Exterior Length: &quot;</span><span class="p">,</span> <span class="n">world_ext_length</span><span class="p">)</span>
<span class="go">                                                                                                                                                                            Poly Exterior Length:  1080.0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pro-tips-optional">
<h2>Pro -tips (optional)<a class="headerlink" href="#pro-tips-optional" title="Permalink to this headline">¶</a></h2>
<p>This part is not obligatory but it contains some useful information
related to construction and usage of geometry collections and some
special geometric objects -such as bounding box.</p>
<div class="section" id="geometry-collections">
<h3>Geometry collections<a class="headerlink" href="#geometry-collections" title="Permalink to this headline">¶</a></h3>
<p>In some occassions it is useful to store e.g. multiple lines or polygons
under a single feature (i.e. a single row in a Shapefile represents more
than one line or polygon object). Collections of points are implemented
by using a MultiPoint -object, collections of curves by using a
MultiLineString -object, and collections of surfaces by a MultiPolygon
-object. These collections are not computationally significant, but are
useful for modeling certain kinds of features. A Y-shaped line feature
(such as road), or multiple polygons (e.g. islands on a like), can be
presented nicely as a whole by a using MultiLineString or MultiPolygon
accordingly. Creating and visualizing a minimum <a class="reference external" href="https://en.wikipedia.org/wiki/Minimum_bounding_box">bounding
box</a> e.g. around
your data points is a really useful function for many purposes (e.g.
trying to understand the extent of your data), here we demonstrate how
to create one using Shapely.</p>
<ul class="simple">
<li>Geometry collections can be constructed in a following manner:</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Import collections of geometric objects + bounding box</span>
<span class="gp">In [62]: </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">MultiPoint</span><span class="p">,</span> <span class="n">MultiLineString</span><span class="p">,</span> <span class="n">MultiPolygon</span><span class="p">,</span> <span class="n">box</span>

<span class="go"># Create a MultiPoint object of our points 1,2 and 3</span>
<span class="gp">In [63]: </span><span class="n">multi_point</span> <span class="o">=</span> <span class="n">MultiPoint</span><span class="p">([</span><span class="n">point1</span><span class="p">,</span> <span class="n">point2</span><span class="p">,</span> <span class="n">point3</span><span class="p">])</span>

<span class="go"># It is also possible to pass coordinate tuples inside</span>
<span class="gp">In [64]: </span><span class="n">multi_point2</span> <span class="o">=</span> <span class="n">MultiPoint</span><span class="p">([(</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">4.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">7.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">25.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.26</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.456</span><span class="p">)])</span>

<span class="go"># We can also create a MultiLineString with two lines</span>
<span class="gp">In [65]: </span><span class="n">line1</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([</span><span class="n">point1</span><span class="p">,</span> <span class="n">point2</span><span class="p">])</span>

<span class="gp">In [66]: </span><span class="n">line2</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([</span><span class="n">point2</span><span class="p">,</span> <span class="n">point3</span><span class="p">])</span>

<span class="gp">In [67]: </span><span class="n">multi_line</span> <span class="o">=</span> <span class="n">MultiLineString</span><span class="p">([</span><span class="n">line1</span><span class="p">,</span> <span class="n">line2</span><span class="p">])</span>

<span class="go"># MultiPolygon can be done in a similar manner</span>
<span class="go"># Let&#39;s divide our world into western and eastern hemispheres with a hole on the western hemisphere</span>
<span class="go"># --------------------------------------------------------------------------------------------------</span>
<span class="go"># Let&#39;s create the exterior of the western part of the world</span>
<span class="gp">In [68]: </span><span class="n">west_exterior</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">)]</span>

<span class="go"># Let&#39;s create a hole --&gt; remember there can be multiple holes, thus we need to have a list of hole(s).</span>
<span class="go"># Here we have just one.</span>
<span class="gp">In [69]: </span><span class="n">west_hole</span> <span class="o">=</span> <span class="p">[[(</span><span class="o">-</span><span class="mi">170</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">170</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">80</span><span class="p">)]]</span>

<span class="go"># Create the Polygon</span>
<span class="gp">In [70]: </span><span class="n">west_poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">shell</span><span class="o">=</span><span class="n">west_exterior</span><span class="p">,</span> <span class="n">holes</span><span class="o">=</span><span class="n">west_hole</span><span class="p">)</span>

<span class="go"># Let&#39;s create the Polygon of our Eastern hemisphere polygon using bounding box</span>
<span class="go"># For bounding box we need to specify the lower-left corner coordinates and upper-right coordinates</span>
<span class="gp">In [71]: </span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span>

<span class="gp">In [72]: </span><span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">90</span>

<span class="go"># Create the polygon using box() function</span>
<span class="gp">In [73]: </span><span class="n">east_poly_box</span> <span class="o">=</span> <span class="n">box</span><span class="p">(</span><span class="n">minx</span><span class="o">=</span><span class="n">min_x</span><span class="p">,</span> <span class="n">miny</span><span class="o">=</span><span class="n">min_y</span><span class="p">,</span> <span class="n">maxx</span><span class="o">=</span><span class="n">max_x</span><span class="p">,</span> <span class="n">maxy</span><span class="o">=</span><span class="n">max_y</span><span class="p">)</span>

<span class="go"># Let&#39;s create our MultiPolygon. We can pass multiple Polygon -objects into our MultiPolygon as a list</span>
<span class="gp">In [74]: </span><span class="n">multi_poly</span> <span class="o">=</span> <span class="n">MultiPolygon</span><span class="p">([</span><span class="n">west_poly</span><span class="p">,</span> <span class="n">east_poly_box</span><span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li>Let&#8217;s see what do we have:</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [75]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;MultiPoint:&quot;</span><span class="p">,</span> <span class="n">multi_point</span><span class="p">)</span>
<span class="go">MultiPoint: MULTIPOINT (2.2 4.2, 7.2 -25.1, 9.26 -2.456)</span>

<span class="gp">In [76]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;MultiLine: &quot;</span><span class="p">,</span> <span class="n">multi_line</span><span class="p">)</span>
<span class="go">                                                         MultiLine:  MULTILINESTRING ((2.2 4.2, 7.2 -25.1), (7.2 -25.1, 9.26 -2.456))</span>

<span class="gp">In [77]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Bounding box: &quot;</span><span class="p">,</span> <span class="n">east_poly_box</span><span class="p">)</span>
<span class="go">                                                                                                                                      Bounding box:  POLYGON ((180 -90, 180 90, 0 90, 0 -90, 180 -90))</span>

<span class="gp">In [78]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;MultiPoly: &quot;</span><span class="p">,</span> <span class="n">multi_poly</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                       MultiPoly:  MULTIPOLYGON (((-180 90, -180 -90, 0 -90, 0 90, -180 90), (-170 80, -170 -80, -10 -80, -10 80, -170 80)), ((180 -90, 180 90, 0 90, 0 -90, 180 -90)))</span>
</pre></div>
</div>
<p>We can see that the outputs are similar to the basic geometric objects
that we created previously but now these objects contain multiple
features of those points, lines or polygons.</p>
</div>
<div class="section" id="geometry-collection-objects-attributes-and-functions">
<h3>Geometry collection -objects&#8217; attributes and functions<a class="headerlink" href="#geometry-collection-objects-attributes-and-functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We can also get many useful attributes from those objects:</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Convex Hull of our MultiPoint --&gt; https://en.wikipedia.org/wiki/Convex_hull</span>
<span class="gp">In [79]: </span><span class="n">convex</span> <span class="o">=</span> <span class="n">multi_point</span><span class="o">.</span><span class="n">convex_hull</span>

<span class="go"># How many lines do we have inside our MultiLineString?</span>
<span class="gp">In [80]: </span><span class="n">lines_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">multi_line</span><span class="p">)</span>

<span class="go"># Let&#39;s calculate the area of our MultiPolygon</span>
<span class="gp">In [81]: </span><span class="n">multi_poly_area</span> <span class="o">=</span> <span class="n">multi_poly</span><span class="o">.</span><span class="n">area</span>

<span class="go"># We can also access different items inside our geometry collections. We can e.g. access a single polygon from</span>
<span class="go"># our MultiPolygon -object by referring to the index</span>
<span class="go"># Let&#39;s calculate the area of our Western hemisphere (with a hole) which is at index 0</span>
<span class="gp">In [82]: </span><span class="n">west_area</span> <span class="o">=</span> <span class="n">multi_poly</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">area</span>

<span class="go"># We can check if we have a &quot;valid&quot; MultiPolygon. MultiPolygon is thought as valid if the individual polygons</span>
<span class="go"># does notintersect with each other. Here, because the polygons have a common 0-meridian, we should NOT have</span>
<span class="go"># a valid polygon. This can be really useful information when trying to find topological errors from your data</span>
<span class="gp">In [83]: </span><span class="n">valid</span> <span class="o">=</span> <span class="n">multi_poly</span><span class="o">.</span><span class="n">is_valid</span>
</pre></div>
</div>
<ul class="simple">
<li>Let&#8217;s see what do we have:</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Convex hull of the points: &quot;</span><span class="p">,</span> <span class="n">convex</span><span class="p">)</span>
<span class="go">Convex hull of the points:  POLYGON ((7.2 -25.1, 2.2 4.2, 9.26 -2.456, 7.2 -25.1))</span>

<span class="gp">In [85]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of lines in MultiLineString:&quot;</span><span class="p">,</span> <span class="n">lines_count</span><span class="p">)</span>
<span class="go">                                                                                   Number of lines in MultiLineString: 2</span>

<span class="gp">In [86]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Area of our MultiPolygon:&quot;</span><span class="p">,</span> <span class="n">multi_poly_area</span><span class="p">)</span>
<span class="go">                                                                                                                         Area of our MultiPolygon: 39200.0</span>

<span class="gp">In [87]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Area of our Western Hemisphere polygon:&quot;</span><span class="p">,</span> <span class="n">west_area</span><span class="p">)</span>
<span class="go">                                                                                                                                                           Area of our Western Hemisphere polygon: 6800.0</span>

<span class="gp">In [88]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Is polygon valid?: &quot;</span><span class="p">,</span> <span class="n">valid</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                          Is polygon valid?:  False</span>
</pre></div>
</div>
<p>From the above we can see that MultiPolygons have exactly the same
attributes available as single geometric objects but now the information
such as area calculates the area of ALL of the individual -objects
combined. There are also some extra features available such as
<em>is_valid</em> attribute that tells if the polygons or lines intersect with
each other.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Exercise-1.html" class="btn btn-neutral float-right" title="Exercise 1" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Lesson1-Intro-Python-GIS.html" class="btn btn-neutral" title="Introduction to Python GIS" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Henrikki Tenkanen.
      Last updated on Feb 20, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
    <li><a href="http://project.invalid/">Project Homepage</a> &raquo;</li>

    <div class="footer">
        <img src="../img/GPLv3_Logo.svg">
    </div>
     



</body>
</html>